<fieldset class="row mb-3">
    <legend class="col-form-label col-sm-3 pt-0">
        <button class="btn btn-sm pe-0" type="button" data-bs-toggle="tooltip"
                data-bs-placement="top"
                title="Reference used for the data sets">
            <i class="far fa-question-circle"></i>
        </button>
        Reference
    </legend>

    <div class="col-sm-1 pe-0 d-grid">
        <button class="btn btn-outline-secondary" type="button" title="Click to look up and add reference"
                data-bs-toggle="modal" data-bs-target="#{{ id_prefix }}_ref_modal"><i class="fas fa-plus"></i>
        </button>
    </div>
    <div class="col-sm-7 text-start">
        <select data-placeholder="Click + button to look up and add reference" multiple
                class="form-select form-control-sm ref-select chosen-select" id="{{ id_prefix }}_refs_input_select"
                name="{{ id_prefix }}_refs_list" disabled
                aria-label="Example select with button addon">
        </select>
    </div>
</fieldset>

<div class="modal fade" id="{{ id_prefix }}_ref_modal" tabindex="-1"
     aria-labelledby="{{ id_prefix }}_refSearchModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="{{ id_prefix }}_refSearchModalLabel"><i class="fas fa-search"></i> Browse
                    Reference</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table table-striped table-sm result-table refs-table" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th><input class="form-check-input ref-check-all" type="checkbox"></th>
                        <th>Author</th>
                        <th>Year</th>
                        <th>Title</th>
                        <th>Journal</th>
                        <th>PubMed</th>
                        <th>Abstract</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for row in ref_data %}
                    <tr>
                        <td><input class="form-check-input ref-check" type="checkbox" value="{{ row.Ref_ID }}"></td>
                        <td>{{ row.Authors }}</td>
                        <td>{{ row.Year }}</td>
                        <td>{{ row.Title }}</td>
                        <td style="min-width:95px;">{{ row.Journal }}</td>
                        <td style="min-width:90px;"><a href="https://www.ncbi.nlm.nih.gov/pubmed/{{ row.PubMed }}"
                                                       target="_blank">
                            {{ row.PubMed if row.PubMed !='NA' }}  </a>
                        </td>
                        <td>
                            <button class="btn btn-sm pe-0" type="button" data-bs-toggle="tooltip"
                                    data-bs-placement="left" title="{{ row.Abstract}}">
                                <i class="far fa-sticky-note"></i></button>
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary add-ref" data-bs-dismiss="modal"
                        data-ref-dest="#{{ id_prefix }}_refs_input_select">Add/Update
                </button>
            </div>
        </div>
    </div>
</div>
